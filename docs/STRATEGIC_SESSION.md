# Стратегическая сессия: сценарий и live-сбор ответов

## Зачем сайт

Сайт предназначен для **стратегических сессий**, где нужно:

1. **Подготовить промты для нейросетей** — оценивать выбранные предложения («Будет ли это работать?», «Продвигать / доработать / отклонить» и т.д.). Ответ нейросети должен быть **коротким** (несколько строчек), а не длинным отчётом.
2. **Оперативно собирать ответы** и выводить их в **онлайн-формате** — участники видят оценки в live-режиме.
3. **Удобно использовать с телефона и с компьютера** — участникам выдаётся QR на сайт, они заходят с телефонов или ноутбуков во время сессии.

## Текущий сценарий использования

- Организатор разворачивает приложение (локально или в облаке, например Streamlit Cloud).
- Участникам выдаётся **ссылка или QR-код** на URL приложения.
- Каждый участник открывает сайт на своём устройстве (телефон или ноутбук) и:
  - в режиме **Консультант** — задаёт вопросы по ситуациям/предложениям и получает короткие оценки;
  - в режиме **SWOT-Анализ** — загружает или вводит тезисы и получает таблицу с вердиктами (Продвигать / Доработать / Отклонить).
- Результаты можно **экспортировать** (TXT, MD, XLSX, DOCX) и при необходимости объединять вручную или показывать на общем экране.

## Короткие ответы нейросети

- В **Консультант** в боковой панели есть переключатель **«Ответ консультанта»**: «Развёрнутый» или **«Короткий (для сессии)»**. В коротком режиме ответ ограничен несколькими строчками (2–5 строк), удобно для оценки «будет ли это работать» на стратегической сессии.
- В **SWOT-Анализ** в настройках блока анализа можно выбрать шаблон: «Строгий (минимум текста)», «Стандартный (краткий)», «Детальный» — для сессии удобнее «Строгий» или «Стандартный».
- В `core/config.py`: `CHAT_MAX_TOKENS` — для развёрнутого ответа, `CHAT_MAX_TOKENS_SHORT` (512) — для короткого режима консультанта.

## Удобство с телефона и компьютера

- Интерфейс адаптирован под **мобильные и десктоп**:
  - в `.streamlit/styles.css` заданы стили для `@media (max-width: 768px)`: уменьшенные отступы, читаемые шрифты, компактные кнопки и поле ввода;
  - блок чата, таблица SWOT и кнопки экспорта остаются удобными на узком экране;
  - вкладки и боковая панель не «ломаются» на телефоне.
- Рекомендуется перед сессией проверить работу по QR с телефона (тот же Wi‑Fi или мобильный интернет).

## Как делать live-сбор и вывод ответов (варианты развития)

Сейчас у каждого участника — своя сессия в браузере; общий «зал» с обновлением в реальном времени в приложении нет. Возможные направления:

1. **Без общего экрана (как сейчас)**  
   Участники работают независимо, экспортируют результаты (TXT, XLSX, DOCX). Организатор собирает файлы (мессенджер, общая папка) и при необходимости выводит сводку на экран вручную.

2. **Общий экран с ручным обновлением**  
   На большом экране открыта та же страница (Консультант или SWOT). Организатор вводит/загружает предложения и обновляет страницу; участники видят те же формулировки и могут параллельно работать у себя. «Сбор» — по экспорту и озвучиванию.

3. **Общая «комната» с backend (следующий шаг)**  
   Чтобы показывать ответы в онлайне всем участникам в реальном времени:
   - нужен **общий backend** (БД или хранилище): например Firebase, Supabase или свой сервер;
   - у сессии — **уникальный код/URL** (например `?room=ABC123`);
   - участники при открытии сайта вводят код комнаты; их ответы (или только вердикты) сохраняются в backend;
   - на общем экране открывается «доска» этой комнаты, которая периодически опрашивает backend (или через WebSocket) и обновляет список ответов.
   Реализация такого режима — отдельный этап (API, БД, безопасность, права доступа).

4. **Гибрид**  
   Оставить текущее приложение для индивидуальной работы и экспорта, а для «live-доски» сделать отдельную страницу или мини-приложение (тот же Streamlit или другой стек), которое читает из общего хранилища и только отображает сводку.

## Рекомендации перед сессией

- Заранее развернуть приложение и проверить доступ по ссылке/QR с телефона и ноутбука.
- В боковой панели один раз ввести API-ключ (если ключ общий — участникам не нужно его вводить; при многопользовательском развёртывании продумать политику ключей).
- Выбрать в SWOT шаблон «Строгий» или «Стандартный», чтобы ответы были короткими.
- Объяснить участникам: зайти по QR, при необходимости прикрепить файл или вставить тезисы, нажать анализ/отправить и при необходимости экспортировать результат.
